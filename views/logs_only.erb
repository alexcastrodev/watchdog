<!-- Header -->
<div class="header-section p-4 text-center rounded-top-4">
    <div class="d-flex justify-content-between align-items-center">
        <a href="/" class="btn btn-outline-light">
            <i class="bi bi-arrow-left me-2"></i>Back to Dashboard
        </a>
        <h1 class="display-5 fw-bold mb-0">
            <i class="bi bi-file-text me-3"></i>System Logs
        </h1>
        <a href="/jobs" class="btn btn-outline-success">
            <i class="bi bi-gear me-2"></i>View Jobs
        </a>
    </div>
</div>

<!-- Content -->
<div class="p-4">
    <% if @stacks.empty? %>
        <div class="text-center py-5">
            <i class="bi bi-inbox display-1 text-muted"></i>
            <h3 class="mt-3 text-light">No Logs Found</h3>
            <p class="text-muted">No job logs are currently available</p>
            <div class="mt-4">
                <a href="/" class="btn btn-danger">
                    <i class="bi bi-house me-2"></i>Back to Dashboard
                </a>
            </div>
        </div>
    <% else %>
        <!-- Statistics -->
        <div class="row g-3 mb-4">
            <% 
            total_jobs = @stacks.sum { |stack_hash| stack_hash.values.first.length }
            total_stacks = @stacks.length
            jobs_with_logs = @stacks.sum { |stack_hash| stack_hash.values.first.count { |job| job[:log] } }
            %>
            <div class="col-md-4">
                <div class="card border-secondary text-center h-100">
                    <div class="card-body">
                        <h3 class="text-danger fw-bold"><%= total_stacks %></h3>
                        <small class="text-muted">Active Stacks</small>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card border-secondary text-center h-100">
                    <div class="card-body">
                        <h3 class="text-info fw-bold"><%= total_jobs %></h3>
                        <small class="text-muted">Total Jobs</small>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card border-secondary text-center h-100">
                    <div class="card-body">
                        <h3 class="text-success fw-bold"><%= jobs_with_logs %></h3>
                        <small class="text-muted">Jobs with Logs</small>
                    </div>
                </div>
            </div>
        </div>

        <!-- Stacks and Jobs -->
        <div class="row g-4">
            <% @stacks.each do |stack_hash| %>
                <% stack_name = stack_hash.keys.first %>
                <% jobs = stack_hash.values.first %>
                <%= erb :'partials/_stack', locals: { stack_name: stack_name, jobs: jobs } %>
            <% end %>
        </div>
    <% end %>
</div>